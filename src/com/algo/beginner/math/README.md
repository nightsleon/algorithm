# Math 数学算法

## 难度级别
Beginner

## 算法分类说明
本包专注于数学相关的算法，包括：
- **大整数运算**：数组表示的大整数加减法
- **数学计算**：阶乘、平方根、幂运算
- **位运算**：二进制操作、位操作技巧

## 包含算法详解

### 🔢 大整数运算算法

#### 1. PlusOne (66. 加一)
**题目**: 给定一个表示大整数的数组，将其加1并返回结果

**核心思想**: 模拟人工加法过程
- **步骤**: 从末尾开始逐位加1 → 处理进位 → 必要时扩展数组
- **时间复杂度**: O(n)
- **空间复杂度**: O(1) 原地操作，最坏情况O(n)

**解题思路**:
1. 从数组末尾开始遍历，逐位加1
2. 使用 `digits[i] %= 10` 统一处理进位和正常情况
3. 如果某位加1后不为0，说明无进位，直接返回
4. 如果遍历完仍有进位，创建新数组并在首位添加1

**关键技巧**:
- 用模运算统一处理进位：`digits[i] = (digits[i] + 1) % 10`
- 提前返回优化：一旦某位不需要进位，立即返回结果

**示例**:
```
输入: [1,2,3] → 输出: [1,2,4]
输入: [9,9,9] → 输出: [1,0,0,0]
```

#### 2. AddBinary (67. 二进制求和)
**题目**: 给定两个二进制字符串，返回它们的二进制和

**核心思想**: 模拟二进制加法过程
- **步骤**: 从末尾开始逐位相加 → 处理进位 → 构建结果字符串
- **时间复杂度**: O(max(len(a), len(b)))
- **空间复杂度**: O(max(len(a), len(b)))

**解题思路**:
1. 从两个字符串末尾开始，同时遍历
2. 计算当前位的和：`digitA + digitB + carry`
3. 使用 `sum % 2` 得到当前位结果，`sum / 2` 得到进位
4. 处理长度不一致的情况，短字符串用0填充
5. 最后反转字符串得到正确顺序

**关键技巧**:
- 统一处理：用三元运算符处理长度不一致
- 进位处理：`carry = sum / 2` 自动处理进位
- 字符串构建：使用StringBuilder提高效率

**示例**:
```
输入: a = "11", b = "1" → 输出: "100"
输入: a = "1010", b = "1011" → 输出: "10101"
```

### 🔄 位运算算法

#### 3. ReverseBits (190. 颠倒二进制位)
**题目**: 给定一个32位无符号整数，返回其二进制位翻转后的结果

**核心思想**: 队列翻转模拟
- **步骤**: 逐位取出 → 重新组装 → 实现翻转
- **时间复杂度**: O(1) - 固定32次循环
- **空间复杂度**: O(1)

**解题思路**:
1. 初始化结果变量 `res = 0`
2. 循环32次（int是32位）
3. 每次迭代：
   - 取n的最后一位：`n & 1`
   - 将res左移一位：`res << 1`
   - 将最后一位添加到res：`res | (n & 1)`
   - 将n右移一位：`n >>= 1`

**关键技巧**:
- 位运算操作：`& 1`获取最低位，`<< 1`左移，`>> 1`右移
- 同步操作：res左移和n右移同时进行
- 固定循环：确保所有32位都被处理

**示例**:
```
输入: 43261596 → 输出: 964176192
二进制: 00000010100101000001111010111100 → 00111101011110000101001010000000
```

#### 4. HammingWeight (191. 位1的个数)
**题目**: 计算一个数的二进制表示中1的个数

**核心思想**: 逐位统计
- **步骤**: 循环右移 → 统计最低位 → 累加计数
- **时间复杂度**: O(log n) - 取决于1的个数
- **空间复杂度**: O(1)

**解题思路**:
1. 初始化计数器 `count = 0`
2. 当n不为0时循环：
   - 统计最低位：`count += n & 1`
   - 右移一位：`n >>= 1`
3. 返回1的总数

**关键技巧**:
- 位运算统计：`n & 1` 快速获取最低位
- 循环优化：一旦n变为0立即停止
- 简单高效：代码简洁，执行效率高

**示例**:
```
输入: 11 (二进制: 1011) → 输出: 3
输入: 128 (二进制: 10000000) → 输出: 1
```

#### 5. SingleNumber (136. 只出现一次的数字)
**题目**: 数组中除了一个元素只出现一次外，其余元素均出现两次，找出只出现一次的元素

**核心思想**: 异或运算的巧妙应用
- **数学原理**: a⊕a=0, a⊕0=a, a⊕b⊕a=b
- **时间复杂度**: O(n)
- **空间复杂度**: O(1)

**解题思路**:
1. 初始化结果 `singleNum = 0`
2. 遍历数组，对每个数进行异或运算：`singleNum ^= num`
3. 最终结果就是只出现一次的数字

**关键技巧**:
- 异或性质：任何数与0异或是本身，与本身异或是0
- 交换律结合律：a⊕b⊕a = b⊕a⊕a = b⊕(a⊕a) = b⊕0 = b
- 空间优化：不需要额外存储空间

**示例**:
```
输入: [2,2,1] → 输出: 1
输入: [4,1,2,1,2] → 输出: 4
```

**HashSet解法对比**:
```java
// 使用HashSet的解法
Set<Integer> set = new HashSet<>();
for (int num : nums) {
    if (!set.add(num)) {
        set.remove(num);
    }
}
return set.iterator().next();
```

### 📊 数学计算算法

#### 6. TrailingZeroes (172. 阶乘后的零)
**题目**: 计算 n! 结果中尾随零的数量

**核心思想**: 数学技巧 - 尾随零数量 = 因子5的数量
- **数学原理**: 2×5=10产生尾随零，2的因子总是比5多
- **时间复杂度**: O(log n)
- **空间复杂度**: O(1)

**解题思路**:
1. 理解尾随零由因子5的数量决定（因为2的因子总是比5多）
2. 使用公式：零的数量 = ⌊n/5⌋ + ⌊n/25⌋ + ⌊n/125⌋ + ...
3. 循环除以5，累加商的值

**关键技巧**:
- 避免直接计算阶乘（会溢出）
- 使用数学公式直接计算因子5的数量
- 每次循环计算一个公式项

**示例**:
```
输入: 5 → 输出: 1 (5! = 120，有1个尾随零)
输入: 25 → 输出: 6 (25! 有6个尾随零)
```

#### 7. MySqrt (69. x的平方根)
**题目**: 计算非负整数x的算术平方根（整数部分）

**核心思想**: 二分查找
- **搜索空间**: [1, x] 或 [0, x]
- **时间复杂度**: O(log x)
- **空间复杂度**: O(1)

**解题思路**:
1. 使用二分查找在[1, x]范围内搜索
2. 用 `x / mid` 代替 `mid * mid` 避免溢出
3. 比较 `x / mid` 与 `mid` 的大小关系
4. 记录候选结果，处理非精确平方根的情况

**关键技巧**:
- 避免整数溢出：使用除法代替乘法
- 记录候选结果：当 `mid² < x` 时，`mid` 可能是最接近的整数
- 提前返回：找到精确平方根时立即返回

**示例**:
```
输入: 8 → 输出: 2 (√8 ≈ 2.828，整数部分是2)
输入: 4 → 输出: 2 (√4 = 2)
```

#### 8. MyPow (50. Pow(x, n))
**题目**: 计算x的n次幂

**核心思想**: 快速幂算法（分治+递归）
- **数学原理**: x^n = (x^(n/2))^2 × x^(n%2)
- **时间复杂度**: O(log n)
- **空间复杂度**: O(log n) 递归栈深度

**解题思路**:
1. 处理负数指数：x^(-n) = 1 / x^n
2. 使用分治思想：将指数分解为 n/2 和 n%2
3. 递归计算 x^(n/2)
4. 根据奇偶性决定是否需要额外乘以x

**关键技巧**:
- 分治策略：将大问题分解为小问题
- 奇偶判断：偶数只需要y²，奇数需要y²×x
- 负数处理：使用long类型避免整数溢出

**递归示例**:
```
计算 2^5:
quickMul(2, 5) → quickMul(2, 2) → quickMul(2, 1) → quickMul(2, 0)
返回: 1 → 2 → 4 → 32
```

## 核心技巧总结

### 🔧 数学技巧
- **模运算统一处理**: 用 `% 10` 统一处理进位
- **数学公式应用**: 阶乘尾随零 = 因子5的数量
- **分治思想**: 将大问题分解为小问题（快速幂）
- **二分查找**: 在有序范围内高效搜索

### ⚡ 位运算技巧
- **异或运算**: a⊕a=0, a⊕0=a, 满足交换律和结合律
- **位操作**: `& 1`获取最低位，`<< 1`左移，`>> 1`右移
- **位级优化**: 直接在位级别操作，效率极高
- **巧妙应用**: 用异或找出只出现一次的数字

### 🚀 优化技巧
- **避免溢出**: 使用除法代替乘法，使用long类型
- **提前返回**: 一旦满足条件立即返回，避免不必要计算
- **递归优化**: 利用分治减少计算次数
- **边界处理**: 正确处理特殊情况（0、1、负数等）
- **空间优化**: 位运算算法通常只需要O(1)空间

### 📈 时间复杂度分析
| 算法 | 时间复杂度 | 空间复杂度 | 核心思想 |
|------|-----------|-----------|----------|
| PlusOne | O(n) | O(1) | 模拟加法 |
| AddBinary | O(max(len(a),len(b))) | O(max(len(a),len(b))) | 二进制加法 |
| ReverseBits | O(1) | O(1) | 位运算翻转 |
| HammingWeight | O(log n) | O(1) | 位运算统计 |
| SingleNumber | O(n) | O(1) | 异或运算 |
| TrailingZeroes | O(log n) | O(1) | 数学技巧 |
| MySqrt | O(log x) | O(1) | 二分查找 |
| MyPow | O(log n) | O(log n) | 快速幂 |

## 学习路径建议

### 🎯 初学者路径
1. **PlusOne** - 学习大整数运算和进位处理
2. **AddBinary** - 掌握二进制运算基础
3. **HammingWeight** - 理解位运算的基本操作
4. **MySqrt** - 掌握二分查找在数学问题中的应用

### 🚀 进阶路径
1. **ReverseBits** - 学习位运算的高级技巧
2. **SingleNumber** - 理解异或运算的巧妙应用
3. **MyPow** - 学习分治思想和递归技巧
4. **TrailingZeroes** - 深入理解数学技巧的重要性

### 🔬 位运算专项
1. **基础操作**: `&`, `|`, `^`, `<<`, `>>`
2. **常用技巧**: 获取最低位、判断奇偶、快速乘除2
3. **高级应用**: 异或找唯一数、位翻转、位计数
4. **实际应用**: 状态压缩、位图、位掩码

## 相关题目推荐
1. **66. Plus One** - 大整数运算基础
2. **67. Add Binary** - 二进制加法
3. **190. Reverse Bits** - 位运算技巧
4. **191. Number of 1 Bits** - 位计数
5. **136. Single Number** - 异或运算应用
6. **172. Factorial Trailing Zeroes** - 数学技巧应用
7. **69. Sqrt(x)** - 二分查找经典应用
8. **50. Pow(x, n)** - 快速幂算法
9. **231. Power of Two** - 判断2的幂
10. **338. Counting Bits** - 计算各个位数的1的个数

## 学习建议
1. 理解数学原理在算法中的重要作用
2. 掌握避免整数溢出的技巧
3. 学会将数学问题转化为算法问题
4. 练习边界条件和特殊情况的处理
5. 理解分治思想在数学计算中的应用
6. **重点掌握位运算**：理解异或运算的性质和应用
7. **练习位级思维**：从位级别思考问题，提高算法效率
8. **掌握位运算技巧**：学会用位运算解决看似复杂的问题

## 相关资源
- [LeetCode Math 题目](https://leetcode.com/tag/math/)
- [LeetCode Bit Manipulation 题目](https://leetcode.com/tag/bit-manipulation/)
- [数学算法可视化](https://visualgo.net/en/math)
- [位运算详解](https://www.geeksforgeeks.org/basics-of-bit-manipulation/)
- [快速幂算法详解](https://www.geeksforgeeks.org/modular-exponentiation-power-in-modular-arithmetic/)
- [二分查找应用](https://www.geeksforgeeks.org/binary-search/)
